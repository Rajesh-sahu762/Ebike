<%@ Master Language="C#" AutoEventWireup="true" CodeFile="VendorMaster.master.cs" Inherits="Vendor_VendorMaster" %>

<!DOCTYPE html>
<html>
<head id="Head1" runat="server">
    <title>Vendor Panel</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#f1f5f9;
}

.sidebar{
    width:240px;
    height:100vh;
    position:fixed;
    background:linear-gradient(180deg,#0f172a,#1e3a8a);
    color:white;
    padding-top:20px;
}

.sidebar h4{
    text-align:center;
    font-weight:700;
    margin-bottom:30px;
}

.sidebar a{
    display:block;
    padding:12px 25px;
    color:white;
    text-decoration:none;
    font-size:15px;
    transition:0.3s;
}

.sidebar a:hover{
    background:rgba(255,255,255,0.1);
}

.sidebar a.active{
    background:rgba(255,255,255,0.2);
}

.content{
    margin-left:240px;
    padding:20px;
}

.topbar{
    background:white;
    padding:15px 25px;
    border-radius:12px;
    box-shadow:0 5px 15px rgba(0,0,0,0.08);
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:20px;
}

.logout-btn{
    background:#ef4444;
    border:none;
    padding:8px 18px;
    border-radius:20px;
    color:white;
}

.logout-btn:hover{
    background:#dc2626;
}

@media(max-width:992px){
    .sidebar{
        width:200px;
    }
    .content{
        margin-left:200px;
    }
}
</style>

</head>

<body>

<form id="form1" runat="server">

<div class="sidebar">
    <h4>Vendor Panel</h4>

    <a href="VendorDashboard.aspx"><i class="fa fa-home"></i> Dashboard</a>
    <a href="AddBike.aspx"><i class="fa fa-plus"></i> Add Bike</a>
    <a href="ManageBikes.aspx"><i class="fa fa-motorcycle"></i> Manage Bikes</a>
    <a href="VendorManageLeads.aspx"><i class="fa fa-envelope"></i> Leads</a>
    <a href="DealerRatings.aspx"><i class="fa fa-star"></i> Ratings</a>
    <a href="VendorEarnings.aspx"><i class="fa fa-dollar-sign"></i> Earnings</a>
    <a href="VendorAnalytics.aspx"><i class="fa fa-chart-line"></i> Analytics</a>
    <a href="VendorProfile.aspx"><i class="fa fa-user"></i> Profile</a>
</div>

<div class="content">

    <div class="topbar">
        <div>
            Welcome, <asp:Label ID="lblVendorName" runat="server"></asp:Label>
        </div>

        <div style=" display:flex; align-items:center;">

        <div style="position:relative; margin-right:20px; ">

    <i class="fa fa-bell fa-lg" style="cursor:pointer;"
        onclick="toggleNotif()"></i>

    <span id="notifBadge" class="badge bg-danger"
        style="position:absolute; top:-5px; right:-8px;">
        <asp:Label ID="lblNotifCount" runat="server"></asp:Label>
    </span>

    <div id="notifPanel"
        style="display:none; position:absolute; right:0; top:30px;
        width:320px; background:white; border-radius:10px;
        box-shadow:0 5px 15px rgba(0,0,0,0.2); padding:10px; z-index:999;">

        <h6>New Leads</h6>

        <asp:Repeater ID="rptNotifications" runat="server">
            <ItemTemplate>
                <div style="padding:8px; border-bottom:1px solid #eee;">
                    <a href="ManageLeads.aspx?lead=<%# Eval("LeadID") %>"
                       style="text-decoration:none;">
                        <%# Eval("FullName") %> interested in
                        <%# Eval("ModelName") %>
                    </a>
                </div>
            </ItemTemplate>
        </asp:Repeater>

        <asp:Button ID="btnClearNotif" runat="server"
            Text="Clear All"
            CssClass="btn btn-sm btn-outline-danger w-100 mt-2"
            OnClick="btnClearNotif_Click" />

    </div>

</div>


        <asp:Button ID="btnLogout" runat="server"
            Text="Logout"
            CssClass="logout-btn"
            OnClick="btnLogout_Click" />
    </div>
        </div>

    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server"></asp:ContentPlaceHolder>

</div>

</form>


    <script>
        function toggleNotif() {
            var panel = document.getElementById("notifPanel");
            panel.style.display =
                panel.style.display === "none" ? "block" : "none";
        }

        if (window.location.pathname.toLowerCase().includes("vendordashboard")) {
            setInterval(function () {
                location.reload();
            }, 20000);
        }

</script>


</body>
</html>
